
let pokemonRepository=(function(){let repository=[];let apiUrl='https://pokeapi.co/api/v2/pokemon/?limit=150';function add(pokemon){if(typeof pokemon==='object'&&'name' in pokemon){repository.push(pokemon)}else{console.log('pokemon is not correct')}}
function getAll(){return repository}
function addListItem(pokemon){let pokemonList=document.querySelector('.pokemon-list');let listpokemon=document.createElement('li');listpokemon.classList.add('pokemon-list-item','col-lg-4','col-md-6');let button=document.createElement('button');button.innerText=pokemon.name;button.classList.add('button-class');button.setAttribute('data-toggle','modal');button.setAttribute('data-target','#pokemonModal')
listpokemon.appendChild(button);pokemonList.appendChild(listpokemon);button.addEventListener('click',function(){showDetails(pokemon)})}
function loadList(){return fetch(apiUrl).then(function(response){return response.json()}).then(function(json){json.results.forEach(function(item){let pokemon={name:item.name,detailsUrl:item.url};add(pokemon)})}).catch(function(e){console.error(e)})}
function loadDetails(item){let url=item.detailsUrl;return fetch(url).then(function(response){return response.json()}).then(function(details){item.imageUrlFront=details.sprites.front_default;item.imageUrlBack=details.sprites.back_default;item.height=details.height;item.weight=details.weight;item.types=details.types}).catch(function(e){console.error(e)})}
function showDetails(item){loadDetails(item).then(function(){showModal(item)})}
function showModal(item){console.log(item);let modalBody=$('.modal-body');let modalTitle=$('.modal-title');modalTitle.empty();modalBody.empty();let nameElement=$('<h1>'+item.name+'</h1>');modalTitle.text(item.name);let imageElementFront=$(`<img class="modal-img" style="width:50%" src="${item.imageUrlFront}">`);let imageElementBack=$(`<img class="modal-img" style="width:50%" src="${item.imageUrlBack}">`);let heightElement=$('<p>'+'Height : '+item.height+'</p>');let weightElement=$('<p>'+'Weight : '+item.weight+'</p>');let typesElement=$('<p>'+'Type : '+item.types.map(t=>t.type.name)+'</p>');modalTitle.append(nameElement);modalBody.append(imageElementFront);modalBody.append(imageElementBack);modalBody.append(heightElement);modalBody.append(weightElement);modalBody.append(typesElement)}
return{add:add,getAll:getAll,loadList:loadList,loadDetails:loadDetails,addListItem:addListItem,showDetails:showDetails}})();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(pokemon){pokemonRepository.addListItem(pokemon)})})